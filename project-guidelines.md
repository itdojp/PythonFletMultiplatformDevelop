# プロジェクトガイドライン

## 開発環境の管理

### シェル環境
- Git Bashを使用（Windows環境）
- パス区切り文字は `/` を使用（Windowsでも）
- コマンドはGit Bash互換のものを使用
- 環境変数の設定は `.bashrc` または `.bash_profile` で管理
- パスの指定は `/c/` から始める（例：`/c/work/Cursor/PythonFletMultiplatformDevelop`）

### Docker環境
- Dockerコンテキスト `FLET_DEV` を使用して環境を分離
- 他のプロジェクトのコンテナーには一切触れない
- コンテナー操作前に必ず `docker context use FLET_DEV` を実行
- コンテナー名には `flet-dev-` プレフィックスを付けて、プロジェクトを明確に識別
- コンテナーの起動前に、同じコンテキスト内の既存コンテナーを停止

### Python環境
- Python実行環境は `uv` を使用
- 仮想環境作成: `uv venv`
- パッケージインストール: `uv pip install`
- スクリプト実行: `uv run`

## コード管理

### Git運用
- コミットメッセージの先頭に `[AI: Cursor]` プレフィックスを付ける
- 機能単位でコミットを作成
- コミット前に必ずpre-commitフックを実行

### コード品質
- 型ヒントを適切に使用
- ドキュメンテーション文字列を記述
- テストカバレッジを維持
- セキュリティスキャンを定期的に実行

## セキュリティ

### 依存関係
- 定期的なセキュリティアップデート
- 脆弱性スキャンの実施
- 依存関係のバージョン管理

### 環境変数
- 機密情報は環境変数で管理
- `.env`ファイルはGit管理対象外
- 本番環境の認証情報は安全に管理

## テスト

### テスト環境
- テスト用データベースを使用
- 非同期処理のテスト対応
- カバレッジレポートの生成

### テスト実行
- コミット前にテストを実行
- 新機能追加時はテストを追加
- テストフィクスチャを適切に使用

## 開発フロー

### 作業手順
1. 環境の確認（Dockerコンテキスト、Python環境、Git Bash）
2. 必要な依存関係の更新
3. コードの実装
4. テストの実行
5. コード品質チェック
6. コミットとプッシュ

### レビュー項目
- セキュリティ要件の充足
- パフォーマンスの考慮
- エラーハンドリング
- ログ出力
- ドキュメント整備

## 注意事項

### 禁止事項
- 他のプロジェクトのコンテナー操作
- 機密情報のハードコーディング
- テストの省略
- 型ヒントの欠如
- ドキュメントの欠如
- Windows形式のパス区切り文字（`\`）の使用
- PowerShellやCMDのコマンドの使用

### 推奨事項
- 定期的なバックアップ
- ログの適切な管理
- エラー監視の実施
- パフォーマンスモニタリング
- セキュリティアップデートの適用
- Git Bashの設定ファイルのバージョン管理
- シェルスクリプトの互換性確認

### Git Bash固有の注意点
- コマンド実行時のパス指定は `/c/` から始める
- 環境変数の設定は `export` を使用
- シェルスクリプトは `.sh` 拡張子を使用
- 改行コードはLF（Unix形式）を使用
- 実行権限の設定は `chmod` で行う
- パイプやリダイレクトは `|` と `>` を使用
- ワイルドカードは `*` を使用
- コマンドの連結は `&&` を使用
